{"version":3,"sources":["../../src/utilities/createPDF.tsx"],"sourcesContent":["import React from 'react'\nimport { pdf, Document, Page, Text, View, StyleSheet } from '@alexandernanberg/react-pdf-renderer'\nimport { CertificateDocument } from '../ui/Certificate/index.js'\n\n\ntype createPDFProps = {\n    studentName: string;\n    courseTitle: string;\n    completionDate: string;\n    certificateNumber: string;\n    templateImage: string;\n    fontFamily: string;\n    authorName?: string;\n}\n\nexport const createPDF = async ({\n    studentName,\n    courseTitle,\n    completionDate,\n    certificateNumber,\n    templateImage,\n    fontFamily,\n    authorName,\n}: createPDFProps) => {\n    console.log('createPDF called with data:', {\n        studentName,\n        courseTitle,\n        completionDate,\n        certificateNumber,\n        templateImage,\n        fontFamily,\n        authorName\n    })\n\n    // Validate inputs\n    if (!studentName || !courseTitle) {\n        throw new Error('Missing required fields: studentName and courseTitle are required')\n    }\n\n    // Check if CertificateDocument is available\n    console.log('CertificateDocument type:', typeof CertificateDocument)\n    if (!CertificateDocument) {\n        throw new Error('CertificateDocument component is not available')\n    }\n\n    try {\n        // First try with a simple test document to isolate the issue\n        console.log('Creating simple test PDF first...')\n        \n        // Create the document element explicitly\n        const testDocument = React.createElement(Document, null,\n            React.createElement(Page, { size: \"A4\" },\n                React.createElement(View, null,\n                    React.createElement(Text, null, \"Test Certificate\"),\n                    React.createElement(Text, null, `Student: ${studentName}`),\n                    React.createElement(Text, null, `Course: ${courseTitle}`)\n                )\n            )\n        )\n        \n        const testPDF = pdf(testDocument)\n        \n        console.log('Test PDF object created, calling toBlob()...')\n        const testBlob = await testPDF.toBlob()\n        console.log('Test PDF created successfully, size:', testBlob.size)\n        \n        // If test works, try with the full certificate\n        console.log('Test PDF successful, now creating full certificate...')\n        \n        // Use JSX for the certificate document since it's a custom component\n        const PDF = pdf(\n            <CertificateDocument\n                studentName={studentName}\n                courseTitle={courseTitle}\n                completionDate={completionDate}\n                certificateNumber={certificateNumber}\n                templateImage={templateImage}\n                fontFamily={fontFamily}\n                authorName={authorName}\n            />\n        )\n\n        console.log('Full PDF object created, calling toBlob()')\n        const blob = await PDF.toBlob()\n        console.log('Full PDF blob created successfully, size:', blob.size)\n        return blob\n    } catch (error) {\n        console.error('Error in createPDF:', error)\n        console.error('Error type:', typeof error)\n        console.error('Error constructor:', error?.constructor?.name)\n        console.error('Error stack:', error instanceof Error ? error.stack : 'No stack trace')\n        console.error('Error message:', error instanceof Error ? error.message : String(error))\n        \n        // Try to get more details about the error\n        if (error && typeof error === 'object') {\n            console.error('Error keys:', Object.keys(error))\n            console.error('Error properties:', Object.getOwnPropertyNames(error))\n        }\n        \n        throw error\n    }\n}"],"names":["React","pdf","Document","Page","Text","View","CertificateDocument","createPDF","studentName","courseTitle","completionDate","certificateNumber","templateImage","fontFamily","authorName","console","log","Error","testDocument","createElement","size","testPDF","testBlob","toBlob","PDF","blob","error","constructor","name","stack","message","String","Object","keys","getOwnPropertyNames"],"mappings":";AAAA,OAAOA,WAAW,QAAO;AACzB,SAASC,GAAG,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,IAAI,EAAEC,IAAI,QAAoB,uCAAsC;AAClG,SAASC,mBAAmB,QAAQ,6BAA4B;AAahE,OAAO,MAAMC,YAAY,OAAO,EAC5BC,WAAW,EACXC,WAAW,EACXC,cAAc,EACdC,iBAAiB,EACjBC,aAAa,EACbC,UAAU,EACVC,UAAU,EACG;IACbC,QAAQC,GAAG,CAAC,+BAA+B;QACvCR;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;IACJ;IAEA,kBAAkB;IAClB,IAAI,CAACN,eAAe,CAACC,aAAa;QAC9B,MAAM,IAAIQ,MAAM;IACpB;IAEA,4CAA4C;IAC5CF,QAAQC,GAAG,CAAC,6BAA6B,OAAOV;IAChD,IAAI,CAACA,qBAAqB;QACtB,MAAM,IAAIW,MAAM;IACpB;IAEA,IAAI;QACA,6DAA6D;QAC7DF,QAAQC,GAAG,CAAC;QAEZ,yCAAyC;QACzC,MAAME,6BAAelB,MAAMmB,aAAa,CAACjB,UAAU,oBAC/CF,MAAMmB,aAAa,CAAChB,MAAM;YAAEiB,MAAM;QAAK,iBACnCpB,MAAMmB,aAAa,CAACd,MAAM,oBACtBL,MAAMmB,aAAa,CAACf,MAAM,MAAM,mCAChCJ,MAAMmB,aAAa,CAACf,MAAM,MAAM,CAAC,SAAS,EAAEI,aAAa,iBACzDR,MAAMmB,aAAa,CAACf,MAAM,MAAM,CAAC,QAAQ,EAAEK,aAAa;QAKpE,MAAMY,UAAUpB,IAAIiB;QAEpBH,QAAQC,GAAG,CAAC;QACZ,MAAMM,WAAW,MAAMD,QAAQE,MAAM;QACrCR,QAAQC,GAAG,CAAC,wCAAwCM,SAASF,IAAI;QAEjE,+CAA+C;QAC/CL,QAAQC,GAAG,CAAC;QAEZ,qEAAqE;QACrE,MAAMQ,MAAMvB,kBACR,KAACK;YACGE,aAAaA;YACbC,aAAaA;YACbC,gBAAgBA;YAChBC,mBAAmBA;YACnBC,eAAeA;YACfC,YAAYA;YACZC,YAAYA;;QAIpBC,QAAQC,GAAG,CAAC;QACZ,MAAMS,OAAO,MAAMD,IAAID,MAAM;QAC7BR,QAAQC,GAAG,CAAC,6CAA6CS,KAAKL,IAAI;QAClE,OAAOK;IACX,EAAE,OAAOC,OAAO;QACZX,QAAQW,KAAK,CAAC,uBAAuBA;QACrCX,QAAQW,KAAK,CAAC,eAAe,OAAOA;QACpCX,QAAQW,KAAK,CAAC,sBAAsBA,OAAOC,aAAaC;QACxDb,QAAQW,KAAK,CAAC,gBAAgBA,iBAAiBT,QAAQS,MAAMG,KAAK,GAAG;QACrEd,QAAQW,KAAK,CAAC,kBAAkBA,iBAAiBT,QAAQS,MAAMI,OAAO,GAAGC,OAAOL;QAEhF,0CAA0C;QAC1C,IAAIA,SAAS,OAAOA,UAAU,UAAU;YACpCX,QAAQW,KAAK,CAAC,eAAeM,OAAOC,IAAI,CAACP;YACzCX,QAAQW,KAAK,CAAC,qBAAqBM,OAAOE,mBAAmB,CAACR;QAClE;QAEA,MAAMA;IACV;AACJ,EAAC"}
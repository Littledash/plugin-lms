{"version":3,"sources":["../../src/providers/reducer.ts"],"sourcesContent":["import type { DefaultDocumentIDType } from 'payload'\nimport type { LMSUser, Course, Topic, Lesson, Quiz, Certificate, CourseProgress } from './types.js'\n\nexport type LMSState = {\n  users: LMSUser[]\n  courses: Course[]\n  topics: Topic[]\n  lessons: Lesson[]\n  progress: CourseProgress[]\n  quizzes: Quiz[]\n  certificates: Certificate[]\n  enrolledCourses: DefaultDocumentIDType[]\n  completedCourses: DefaultDocumentIDType[]\n  isLoading: boolean\n  error: Error | null\n}\n\nexport type LMSAction =\n  | { type: 'SET_LOADING'; payload: boolean }\n  | { type: 'SET_ERROR'; payload: Error | null }\n  | { type: 'SET_USERS'; payload: LMSUser[] }\n  | { type: 'SET_COURSES'; payload: Course[] }\n  | { type: 'SET_TOPICS'; payload: Topic[] }\n  | { type: 'SET_LESSONS'; payload: Lesson[] }\n  | { type: 'SET_QUIZZES'; payload: Quiz[] }\n  | { type: 'SET_CERTIFICATES'; payload: Certificate[] }\n  | { type: 'ENROLL_IN_COURSE'; payload: DefaultDocumentIDType }\n  | { type: 'COMPLETE_COURSE'; payload: DefaultDocumentIDType }\n  | { type: 'UPDATE_PROGRESS'; payload: CourseProgress[] }\n  | { type: 'SET_ENROLLED_COURSES'; payload: DefaultDocumentIDType[] }\n  | { type: 'SET_COMPLETED_COURSES'; payload: DefaultDocumentIDType[] }\n  | { type: 'ADD_CERTIFICATE'; payload: { id: DefaultDocumentIDType } }\n  | { type: 'GENERATE_CERTIFICATE'; payload: { id: DefaultDocumentIDType } }\n  | { type: 'LOAD_FROM_STORAGE'; payload: { progress: CourseProgress[]; enrolledCourses: DefaultDocumentIDType[]; completedCourses: DefaultDocumentIDType[] } }\n  | { type: 'RESET_STATE' }\n\nexport const initialState: LMSState = {\n  users: [],\n  courses: [],\n  topics: [],\n  lessons: [],\n  progress: [],\n  quizzes: [],\n  certificates: [],\n  enrolledCourses: [],\n  completedCourses: [],\n  isLoading: false,\n  error: null,\n}\n\nexport const lmsReducer = (state: LMSState, action: LMSAction): LMSState => {\n  switch (action.type) {\n    case 'SET_LOADING':\n      return {\n        ...state,\n        isLoading: action.payload,\n      }\n\n    case 'SET_ERROR':\n      return {\n        ...state,\n        error: action.payload,\n      }\n\n    case 'SET_USERS':\n      return {\n        ...state,\n        users: action.payload,\n      }\n\n    case 'SET_COURSES':\n      return {\n        ...state,\n        courses: action.payload,\n      }\n\n    case 'SET_TOPICS':\n      return {\n        ...state,\n        topics: action.payload,\n      }\n\n    case 'SET_LESSONS':\n      return {\n        ...state,\n        lessons: action.payload,\n      }\n\n    case 'SET_QUIZZES':\n      return {\n        ...state,\n        quizzes: action.payload,\n      }\n\n    case 'SET_CERTIFICATES':\n      return {\n        ...state,\n        certificates: action.payload,\n      }\n\n    case 'ENROLL_IN_COURSE':\n      return {\n        ...state,\n        enrolledCourses: [...state.enrolledCourses, action.payload],\n      }\n\n    case 'COMPLETE_COURSE':\n      return {\n        ...state,\n        enrolledCourses: state.enrolledCourses.filter((courseId) => courseId !== action.payload),\n        completedCourses: [...state.completedCourses, action.payload],\n      }\n\n    case 'UPDATE_PROGRESS':\n      return {\n        ...state,\n        progress: action.payload,\n      }\n\n    case 'SET_ENROLLED_COURSES':\n      return {\n        ...state,\n        enrolledCourses: action.payload,\n      }\n\n    case 'SET_COMPLETED_COURSES':\n      return {\n        ...state,\n        completedCourses: action.payload,\n      }\n\n    case 'ADD_CERTIFICATE':\n      return {\n        ...state,\n        certificates: [...state.certificates, action.payload],\n      }\n\n    case 'GENERATE_CERTIFICATE':\n      return {\n        ...state,\n        certificates: [...state.certificates, action.payload],\n      }\n\n    case 'LOAD_FROM_STORAGE':\n      return {\n        ...state,\n        progress: action.payload.progress,\n        enrolledCourses: action.payload.enrolledCourses,\n        completedCourses: action.payload.completedCourses,\n      }\n\n    case 'RESET_STATE':\n      return initialState\n\n    default:\n      return state\n  }\n}\n"],"names":["initialState","users","courses","topics","lessons","progress","quizzes","certificates","enrolledCourses","completedCourses","isLoading","error","lmsReducer","state","action","type","payload","filter","courseId"],"mappings":"AAoCA,OAAO,MAAMA,eAAyB;IACpCC,OAAO,EAAE;IACTC,SAAS,EAAE;IACXC,QAAQ,EAAE;IACVC,SAAS,EAAE;IACXC,UAAU,EAAE;IACZC,SAAS,EAAE;IACXC,cAAc,EAAE;IAChBC,iBAAiB,EAAE;IACnBC,kBAAkB,EAAE;IACpBC,WAAW;IACXC,OAAO;AACT,EAAC;AAED,OAAO,MAAMC,aAAa,CAACC,OAAiBC;IAC1C,OAAQA,OAAOC,IAAI;QACjB,KAAK;YACH,OAAO;gBACL,GAAGF,KAAK;gBACRH,WAAWI,OAAOE,OAAO;YAC3B;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRF,OAAOG,OAAOE,OAAO;YACvB;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRZ,OAAOa,OAAOE,OAAO;YACvB;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRX,SAASY,OAAOE,OAAO;YACzB;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRV,QAAQW,OAAOE,OAAO;YACxB;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRT,SAASU,OAAOE,OAAO;YACzB;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRP,SAASQ,OAAOE,OAAO;YACzB;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRN,cAAcO,OAAOE,OAAO;YAC9B;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRL,iBAAiB;uBAAIK,MAAML,eAAe;oBAAEM,OAAOE,OAAO;iBAAC;YAC7D;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRL,iBAAiBK,MAAML,eAAe,CAACS,MAAM,CAAC,CAACC,WAAaA,aAAaJ,OAAOE,OAAO;gBACvFP,kBAAkB;uBAAII,MAAMJ,gBAAgB;oBAAEK,OAAOE,OAAO;iBAAC;YAC/D;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRR,UAAUS,OAAOE,OAAO;YAC1B;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRL,iBAAiBM,OAAOE,OAAO;YACjC;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRJ,kBAAkBK,OAAOE,OAAO;YAClC;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRN,cAAc;uBAAIM,MAAMN,YAAY;oBAAEO,OAAOE,OAAO;iBAAC;YACvD;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRN,cAAc;uBAAIM,MAAMN,YAAY;oBAAEO,OAAOE,OAAO;iBAAC;YACvD;QAEF,KAAK;YACH,OAAO;gBACL,GAAGH,KAAK;gBACRR,UAAUS,OAAOE,OAAO,CAACX,QAAQ;gBACjCG,iBAAiBM,OAAOE,OAAO,CAACR,eAAe;gBAC/CC,kBAAkBK,OAAOE,OAAO,CAACP,gBAAgB;YACnD;QAEF,KAAK;YACH,OAAOT;QAET;YACE,OAAOa;IACX;AACF,EAAC"}
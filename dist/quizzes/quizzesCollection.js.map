{"version":3,"sources":["../../src/quizzes/quizzesCollection.ts"],"sourcesContent":["import { CollectionConfig, Field } from 'payload'\nimport { FieldsOverride } from '../types.js'\nimport { isAdminOrAuthorOrEnrolledInCourseFieldLevel } from '../access/isAdminOrAuthorOrEnrolledInCourse.js'\n/**\n * Props interface for configuring the quizzes collection\n * @property mediaCollectionSlug - Slug for the media collection (default: 'media')\n * @property overrides - Optional configuration overrides for fields and collection settings\n */\ntype Props = {\n  mediaCollectionSlug?: string\n  studentsCollectionSlug?: string\n  overrides?: { fields?: FieldsOverride } & Partial<Omit<CollectionConfig, 'fields'>>\n}\n\n/**\n * Creates a quizzes collection configuration for Payload CMS\n * This collection manages quizzes and assessments\n *\n * @param props - Configuration properties for the quizzes collection\n * @returns CollectionConfig object for quizzes\n */\nexport const quizzesCollection: (props?: Props) => CollectionConfig<'quizzes'> = (props) => {\n  const { overrides, mediaCollectionSlug = 'media', studentsCollectionSlug = 'users' } = props || {}\n  const fieldsOverride = overrides?.fields\n\n  /**\n   * Default fields for the quizzes collection\n   * Includes quiz details, access control, and content organization\n   */\n  const defaultFields: Field[] = [\n    {\n      name: 'title',\n      type: 'text',\n      required: true,\n      admin: {\n        description: 'The title of the quiz',\n      },\n    },\n    {\n      name: 'excerpt',\n      type: 'text',\n      admin: {\n        description: 'The excerpt of the quiz',\n      },\n    },\n    {\n      name: 'description',\n      type: 'richText',\n      admin: {\n        description: 'The description of the quiz',\n      },\n      access: {\n        read: isAdminOrAuthorOrEnrolledInCourseFieldLevel,\n      },\n    },\n    {\n      name: 'questions',\n      type: 'array',\n      admin: {\n        position: 'sidebar',\n        description: 'The questions in this quiz with their order, points, and timing',\n      },\n      access: {\n        read: isAdminOrAuthorOrEnrolledInCourseFieldLevel,\n      },\n      fields: [\n        {\n          name: 'question',\n          type: 'join',\n          collection: 'questions',\n          on: 'quiz',\n          required: true,\n        },\n        {\n          name: 'order',\n          type: 'number',\n          required: true,\n          admin: {\n            width: '50%',\n            description: 'The order of the question in the quiz',\n          },\n        },\n        {\n          name: 'points',\n          type: 'number',\n          defaultValue: 1,\n          required: true,\n          admin: {\n            width: '50%',\n            description: 'Points awarded for this question',\n          },\n        },\n        {\n          name: 'timeLimit',\n          type: 'number',\n          admin: {\n            width: '50%',\n            description: 'Time limit in seconds for this question (optional)',\n          },\n        },\n        {\n          name: 'isRequired',\n          type: 'checkbox',\n          defaultValue: true,\n          admin: {\n            width: '50%',\n            description: 'Whether this question is required to pass the quiz',\n          },\n        },\n        {\n          name: 'randomizeAnswers',\n          type: 'checkbox',\n          defaultValue: false,\n          admin: {\n            width: '50%',\n            description: 'Randomize the order of answer choices',\n          },\n        },\n      ],\n    },\n    {\n      name: 'authors',\n      type: 'relationship',\n      relationTo: studentsCollectionSlug,\n      hasMany: true,\n      admin: {\n        position: 'sidebar',\n        allowCreate: false,\n        description: 'The authors of the quiz',\n      },\n    },\n    {\n      name: 'featuredImage',\n      type: 'upload',\n      relationTo: mediaCollectionSlug,\n      admin: {\n        position: 'sidebar',\n        description: 'The featured image of the quiz',\n      },\n    },\n  ]\n\n  // Apply field overrides if provided\n  const fields =\n    fieldsOverride && typeof fieldsOverride === 'function'\n      ? fieldsOverride({ defaultFields })\n      : defaultFields\n\n  /**\n   * Base configuration for the quizzes collection\n   * Includes slug, access control, timestamps, and admin settings\n   */\n  const baseConfig: CollectionConfig = {\n    slug: 'quizzes',\n    timestamps: true,\n    ...overrides,\n    admin: {\n      useAsTitle: 'title',\n      group: 'LMS',\n      ...overrides?.admin,\n    },\n    fields,\n  }\n\n  return { ...baseConfig }\n}\n"],"names":["isAdminOrAuthorOrEnrolledInCourseFieldLevel","quizzesCollection","props","overrides","mediaCollectionSlug","studentsCollectionSlug","fieldsOverride","fields","defaultFields","name","type","required","admin","description","access","read","position","collection","on","width","defaultValue","relationTo","hasMany","allowCreate","baseConfig","slug","timestamps","useAsTitle","group"],"mappings":"AAEA,SAASA,2CAA2C,QAAQ,iDAAgD;AAY5G;;;;;;CAMC,GACD,OAAO,MAAMC,oBAAoE,CAACC;IAChF,MAAM,EAAEC,SAAS,EAAEC,sBAAsB,OAAO,EAAEC,yBAAyB,OAAO,EAAE,GAAGH,SAAS,CAAC;IACjG,MAAMI,iBAAiBH,WAAWI;IAElC;;;GAGC,GACD,MAAMC,gBAAyB;QAC7B;YACEC,MAAM;YACNC,MAAM;YACNC,UAAU;YACVC,OAAO;gBACLC,aAAa;YACf;QACF;QACA;YACEJ,MAAM;YACNC,MAAM;YACNE,OAAO;gBACLC,aAAa;YACf;QACF;QACA;YACEJ,MAAM;YACNC,MAAM;YACNE,OAAO;gBACLC,aAAa;YACf;YACAC,QAAQ;gBACNC,MAAMf;YACR;QACF;QACA;YACES,MAAM;YACNC,MAAM;YACNE,OAAO;gBACLI,UAAU;gBACVH,aAAa;YACf;YACAC,QAAQ;gBACNC,MAAMf;YACR;YACAO,QAAQ;gBACN;oBACEE,MAAM;oBACNC,MAAM;oBACNO,YAAY;oBACZC,IAAI;oBACJP,UAAU;gBACZ;gBACA;oBACEF,MAAM;oBACNC,MAAM;oBACNC,UAAU;oBACVC,OAAO;wBACLO,OAAO;wBACPN,aAAa;oBACf;gBACF;gBACA;oBACEJ,MAAM;oBACNC,MAAM;oBACNU,cAAc;oBACdT,UAAU;oBACVC,OAAO;wBACLO,OAAO;wBACPN,aAAa;oBACf;gBACF;gBACA;oBACEJ,MAAM;oBACNC,MAAM;oBACNE,OAAO;wBACLO,OAAO;wBACPN,aAAa;oBACf;gBACF;gBACA;oBACEJ,MAAM;oBACNC,MAAM;oBACNU,cAAc;oBACdR,OAAO;wBACLO,OAAO;wBACPN,aAAa;oBACf;gBACF;gBACA;oBACEJ,MAAM;oBACNC,MAAM;oBACNU,cAAc;oBACdR,OAAO;wBACLO,OAAO;wBACPN,aAAa;oBACf;gBACF;aACD;QACH;QACA;YACEJ,MAAM;YACNC,MAAM;YACNW,YAAYhB;YACZiB,SAAS;YACTV,OAAO;gBACLI,UAAU;gBACVO,aAAa;gBACbV,aAAa;YACf;QACF;QACA;YACEJ,MAAM;YACNC,MAAM;YACNW,YAAYjB;YACZQ,OAAO;gBACLI,UAAU;gBACVH,aAAa;YACf;QACF;KACD;IAED,oCAAoC;IACpC,MAAMN,SACJD,kBAAkB,OAAOA,mBAAmB,aACxCA,eAAe;QAAEE;IAAc,KAC/BA;IAEN;;;GAGC,GACD,MAAMgB,aAA+B;QACnCC,MAAM;QACNC,YAAY;QACZ,GAAGvB,SAAS;QACZS,OAAO;YACLe,YAAY;YACZC,OAAO;YACP,GAAGzB,WAAWS,KAAK;QACrB;QACAL;IACF;IAEA,OAAO;QAAE,GAAGiB,UAAU;IAAC;AACzB,EAAC"}